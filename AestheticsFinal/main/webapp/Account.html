<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Account</title>
</head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
	header {
		padding: 10px;
		margin: 25px;
		display: flex;
		justify-content: space-between;
		align-items: center;
		background-color: darkred;
		color: gold;
	}
	header a{
		margin-right: 15px;
		text-decoration: none;
		color:white;
		font-size:12px;
		font-family: 'Times New Roman', Times, serif;
	}
	.results {
		padding: 10px;
		font-size: 15px;
		align-items: center;
		text-align: center;
	}
</style>
<script>
	window.onload = function(){
	    displayInfo();
	}
	
	function getCookie(cname) {
		let name = cname + "=";
	  let decodedCookie = decodeURIComponent(document.cookie);
	  let ca = decodedCookie.split(';');
	  for(let i = 0; i <ca.length; i++) {
	    let c = ca[i];
	    while (c.charAt(0) == ' ') {
	      c = c.substring(1);
	    }
	    if (c.indexOf(name) == 0) {
	      return c.substring(name.length, c.length);
	    }
	  }
	  return "";
	}
	function displayInfo() {
		var cookie = getCookie("username");
		$.ajax({
			url: "AccountServlet",
			data: {
				username: cookie,
			},
			error: function(error) {
				$("#accountMsg").html(error);
			},
			success: function(result) {
				accountResults.innerHTML = '';
				var info = JSON.parse(result);
				var accountResults = document.getElementById("accountMsg");
				
				accountResults.innerHTML = 
					'<fieldset class="results">' +
					    '<legend>Account Information</legend>' +
					    'First Name: ' + info.FirstName + '<br>' +
					    'Last Name: ' + info.LastName + '<br>' +
					    'Email: ' + info.Email + '<br>' +
					    'Major: ' + info.Major + '<br>' +
					 '</fieldset>';
			}
		});
	}
</script>
<body>
	<header>
        <div>
            <h1>Account</h1>
        </div>
        <div>
            <a class="fa fa-home" href="Homepage.html"></a>
            <a class="fa fa-users" href="Groups.html"></a>
            <a class="fa fa-search" href="SearchPage.html"></a>
            <a class="fa fa-calendar" href="Calendar.html"></a>
            <a class="fa fa-user-circle" href="Account.html"></a>
            <a class="fa fa-sign-out" href="Logout.html"></a>
        </div>
    </header>
    <div id="accountMsg"></div>
</body>
</html>